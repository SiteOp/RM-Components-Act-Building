function makeProgress(e){$("#progress").removeClass(),$("#progress").css("width",e+"%").text(e+" %"),e>100?$("#progress").addClass("progress-bar progress-bar-striped bg-danger"):100==e?$("#progress").addClass("progress-bar progress-bar-striped bg-success"):e>70?$("#progress").addClass("progress-bar progress-bar-striped bg-info"):$("#progress").addClass("progress-bar progress-bar-striped")}function check(e){return $.isNumeric(e)&&e>=0?e:0}function loadData(){let e=$("#jform_routestotal").val(),r=$("#total_lines ").text(),a=parseFloat(e/r).toFixed(1);$("#density").text(check(a));let t=$("#percent_val input").sum();$("#jform_percent").val(t),makeProgress(t);let s=100-t,o=check($("#percent3").val()),l=check($("#percent4").val()),c=check($("#percent5").val()),d=check($("#percent6").val()),p=check($("#percent7").val()),g=check($("#percent8").val()),u=check($("#percent9").val()),n=check($("#percent10").val()),v=check($("#percent11").val()),i=check($("#percent12").val()),h={0:s,3:o,4:l,5:c,6:d,7:p,8:g,9:u,10:n,11:v,12:i},_=JSON.stringify(h);$("#percentsoll").val(_);let k=e/100*o,F=e/100*l,f=e/100*c,x=e/100*d,b=e/100*p,m=e/100*g,y=e/100*u,C=e/100*n,j=e/100*v,D=e/100*i;$("#routes_grade3").val(parseFloat(k).toFixed(1)),$("#routes_grade4").val(parseFloat(F).toFixed(1)),$("#routes_grade5").val(parseFloat(f).toFixed(1)),$("#routes_grade6").val(parseFloat(x).toFixed(1)),$("#routes_grade7").val(parseFloat(b).toFixed(1)),$("#routes_grade8").val(parseFloat(m).toFixed(1)),$("#routes_grade9").val(parseFloat(y).toFixed(1)),$("#routes_grade10").val(parseFloat(C).toFixed(1)),$("#routes_grade11").val(parseFloat(j).toFixed(1)),$("#routes_grade12").val(parseFloat(D).toFixed(1));let N={3:check($("#routes_grade3").val()),4:check($("#routes_grade4").val()),5:check($("#routes_grade5").val()),6:check($("#routes_grade6").val()),7:check($("#routes_grade7").val()),8:check($("#routes_grade8").val()),9:check($("#routes_grade9").val()),10:check($("#routes_grade10").val()),11:check($("#routes_grade11").val()),12:check($("#routes_grade12").val()),13:e-$("#allroutes input").sum()},J=JSON.stringify(N);$("#routessoll").val(J)}!function(e){e.fn.sum=function(){let r=0;return e(this).each(function(a,t){""!=e(t).val()&&(r+=parseFloat(e(t).val()))}),r}}(jQuery),$(document).ready(function(){loadData()}),$("#gradetable, #jform_routestotal").change(function(){loadData()});